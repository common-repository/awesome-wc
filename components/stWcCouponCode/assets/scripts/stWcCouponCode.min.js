Vue.component("st-wc-coupon-code",{props:{couponButtonStyle:{type:String,default:""},ajaxUrl:{type:String,defualt:""}},data:()=>({code:"",applying:!1,errorMessage:""}),mounted(){},computed:{btnDisabled(){return this.code.length}},methods:{applyCode(){if(null==this.code||null==this.code||0==this.code.length)return;this.errorMessage="";let formData=new FormData;formData.set("action","st_wc_apply_coupon_code"),formData.set("code",this.code),this.applying=!0,stBus.$emit("cartLoading",!0),stBus.$emit("checkoutLoading",!0),axios.post(this.ajaxUrl,formData).then(response=>{stBus.$emit("cartLoading",!1),stBus.$emit("checkoutLoading",!1),this.applying=!1,this.code="",this.errorMessage=response.data.error?response.data.message:"",stBus.$emit("cartRefresh"),stBus.$emit("checkoutRefresh")}).catch(error=>{this.applying=!1})}}});